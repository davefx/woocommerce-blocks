(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[5535],{"./assets/js/base/components/price-slider/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithButton:()=>WithButton,WithoutInputs:()=>WithoutInputs,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var react=__webpack_require__("./node_modules/react/index.js"),currency=__webpack_require__("./storybook/custom-controls/currency.ts"),build_module=__webpack_require__("./node_modules/@wordpress/i18n/build-module/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),components=__webpack_require__("./packages/components/index.ts"),object=__webpack_require__("./assets/js/types/type-guards/object.ts"),index_module=__webpack_require__("./node_modules/use-debounce/dist/index.module.js");__webpack_require__("./assets/js/base/components/price-slider/style.scss");const constrainRangeSliderValues=(values,min,max,step=1,isMin=!1)=>{let[minValue,maxValue]=values;const isFinite=n=>Number.isFinite(n);return isFinite(minValue)||(minValue=min||0),isFinite(maxValue)||(maxValue=max||step),isFinite(min)&&min>minValue&&(minValue=min),isFinite(max)&&max<=minValue&&(minValue=max-step),isFinite(min)&&min>=maxValue&&(maxValue=min+step),isFinite(max)&&max<maxValue&&(maxValue=max),!isMin&&minValue>=maxValue&&(minValue=maxValue-step),isMin&&maxValue<=minValue&&(maxValue=minValue+step),[minValue,maxValue]};__webpack_require__("./assets/js/base/components/filter-submit-button/style.scss");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const FilterSubmitButton=({className,isLoading,disabled,label=(0,build_module.__)("Apply","woo-gutenberg-products-block"),onClick,screenReaderLabel=(0,build_module.__)("Apply filter","woo-gutenberg-products-block")})=>(0,jsx_runtime.jsx)("button",{type:"submit",className:classnames_default()("wp-block-button__link","wc-block-filter-submit-button","wc-block-components-filter-submit-button",{"is-loading":isLoading},className),disabled,onClick,children:(0,jsx_runtime.jsx)(components.__,{label,screenReaderLabel})});FilterSubmitButton.displayName="FilterSubmitButton",FilterSubmitButton.__docgenInfo={description:"",methods:[],displayName:"FilterSubmitButton",props:{label:{defaultValue:{value:"__( 'Apply', 'woo-gutenberg-products-block' )",computed:!0},required:!1,tsType:{name:"string"},description:""},screenReaderLabel:{defaultValue:{value:"__( 'Apply filter', 'woo-gutenberg-products-block' )",computed:!0},required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const filter_submit_button=FilterSubmitButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/filter-submit-button/index.tsx"]={name:"FilterSubmitButton",docgenInfo:FilterSubmitButton.__docgenInfo,path:"assets/js/base/components/filter-submit-button/index.tsx"});const isValidMaxValue=({maxConstraint,minorUnit})=>({floatValue})=>void 0!==floatValue&&floatValue<=maxConstraint/10**minorUnit&&floatValue>0,isValidMinValue=({minConstraint,currentMaxValue,minorUnit})=>({floatValue})=>void 0!==floatValue&&floatValue>=minConstraint/10**minorUnit&&floatValue<currentMaxValue/10**minorUnit;__webpack_require__("./assets/js/base/components/filter-reset-button/style.scss");const FilterResetButton=({className,label=(0,build_module.__)("Reset","woo-gutenberg-products-block"),onClick,screenReaderLabel=(0,build_module.__)("Reset filter","woo-gutenberg-products-block")})=>(0,jsx_runtime.jsx)("button",{className:classnames_default()("wc-block-components-filter-reset-button",className),onClick,children:(0,jsx_runtime.jsx)(components.__,{label,screenReaderLabel})});FilterResetButton.displayName="FilterResetButton",FilterResetButton.__docgenInfo={description:"",methods:[],displayName:"FilterResetButton",props:{label:{defaultValue:{value:"__( 'Reset', 'woo-gutenberg-products-block' )",computed:!0},required:!1,tsType:{name:"string"},description:""},screenReaderLabel:{defaultValue:{value:"__( 'Reset filter', 'woo-gutenberg-products-block' )",computed:!0},required:!1,tsType:{name:"string"},description:""},className:{required:!1,tsType:{name:"string"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const filter_reset_button=FilterResetButton;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/filter-reset-button/index.tsx"]={name:"FilterResetButton",docgenInfo:FilterResetButton.__docgenInfo,path:"assets/js/base/components/filter-reset-button/index.tsx"});const PriceSlider=({minPrice,maxPrice,minConstraint,maxConstraint,onChange,step,currency,showInputFields=!0,showFilterButton=!1,inlineInput=!0,isLoading=!1,isUpdating=!1,isEditor=!1,onSubmit=()=>{}})=>{const minRange=(0,react.useRef)(null),maxRange=(0,react.useRef)(null),stepValue=step||10**currency.minorUnit,[minPriceInput,setMinPriceInput]=(0,react.useState)(minPrice),[maxPriceInput,setMaxPriceInput]=(0,react.useState)(maxPrice),wrapper=(0,react.useRef)(null),[wrapperWidth,setWrapperWidth]=(0,react.useState)(0);(0,react.useEffect)((()=>{setMinPriceInput(minPrice)}),[minPrice]),(0,react.useEffect)((()=>{setMaxPriceInput(maxPrice)}),[maxPrice]),(0,react.useLayoutEffect)((()=>{inlineInput&&wrapper.current&&setWrapperWidth(wrapper.current?.offsetWidth)}),[inlineInput,setWrapperWidth]);const hasValidConstraints=(0,react.useMemo)((()=>isFinite(minConstraint)&&isFinite(maxConstraint)),[minConstraint,maxConstraint]),progressStyles=(0,react.useMemo)((()=>{if(!isFinite(minPrice)||!isFinite(maxPrice)||!hasValidConstraints)return{"--low":"0%","--high":"100%"};return{"--low":(minPrice-minConstraint)/(maxConstraint-minConstraint)*100+"%","--high":(maxPrice-minConstraint)/(maxConstraint-minConstraint)*100+"%"}}),[minPrice,maxPrice,minConstraint,maxConstraint,hasValidConstraints]),findClosestRange=(0,react.useCallback)((event=>{if(isLoading||!hasValidConstraints||!minRange.current||!maxRange.current)return;const bounds=event.target.getBoundingClientRect(),x=event.clientX-bounds.left,minWidth=minRange.current.offsetWidth,minValue=+minRange.current.value,maxWidth=maxRange.current.offsetWidth,maxValue=+maxRange.current.value,minX=minWidth*(minValue/maxConstraint),maxX=maxWidth*(maxValue/maxConstraint);Math.abs(x-minX)>Math.abs(x-maxX)?(minRange.current.style.zIndex="20",maxRange.current.style.zIndex="21"):(minRange.current.style.zIndex="21",maxRange.current.style.zIndex="20")}),[isLoading,maxConstraint,hasValidConstraints]),rangeInputOnChange=(0,react.useCallback)((event=>{const isMin=event.target.classList.contains("wc-block-price-filter__range-input--min"),targetValue=+event.target.value,currentValues=isMin?[Math.round(targetValue/stepValue)*stepValue,maxPrice]:[minPrice,Math.round(targetValue/stepValue)*stepValue],values=constrainRangeSliderValues(currentValues,minConstraint,maxConstraint,stepValue,isMin);onChange(values)}),[onChange,minPrice,maxPrice,minConstraint,maxConstraint,stepValue]),priceInputOnBlur=(0,react.useCallback)((event=>{if(event.relatedTarget&&event.relatedTarget.classList&&event.relatedTarget.classList.contains("wc-block-price-filter__amount"))return;const isMin=event.target.classList.contains("wc-block-price-filter__amount--min");if(minPriceInput>=maxPriceInput){const values=constrainRangeSliderValues([0,maxPriceInput],null,null,stepValue,isMin);return onChange([parseInt(values[0],10),parseInt(values[1],10)])}const values=constrainRangeSliderValues([minPriceInput,maxPriceInput],null,null,stepValue,isMin);onChange(values)}),[onChange,stepValue,minPriceInput,maxPriceInput]),debouncedUpdateQuery=(0,index_module.y1)(onSubmit,600),classes=classnames_default()("wc-block-price-filter","wc-block-components-price-slider",showInputFields&&"wc-block-price-filter--has-input-fields",showInputFields&&"wc-block-components-price-slider--has-input-fields",showFilterButton&&"wc-block-price-filter--has-filter-button",showFilterButton&&"wc-block-components-price-slider--has-filter-button",!hasValidConstraints&&"is-disabled",(inlineInput||wrapperWidth<=300)&&"wc-block-components-price-slider--is-input-inline"),activeElement=(0,object.Kn)(minRange.current)?minRange.current.ownerDocument.activeElement:void 0,minRangeStep=activeElement&&activeElement===minRange.current?stepValue:1,maxRangeStep=activeElement&&activeElement===maxRange.current?stepValue:1,ariaReadableMinPrice=String(minPriceInput/10**currency.minorUnit),ariaReadableMaxPrice=String(maxPriceInput/10**currency.minorUnit),inlineInputAvailable=inlineInput&&wrapperWidth>300,slider=(0,jsx_runtime.jsx)("div",{className:classnames_default()("wc-block-price-filter__range-input-wrapper","wc-block-components-price-slider__range-input-wrapper",{"is-loading":isLoading&&isUpdating}),onMouseMove:findClosestRange,onFocus:findClosestRange,children:hasValidConstraints&&(0,jsx_runtime.jsxs)("div",{"aria-hidden":showInputFields,children:[(0,jsx_runtime.jsx)("div",{className:"wc-block-price-filter__range-input-progress wc-block-components-price-slider__range-input-progress",style:progressStyles}),(0,jsx_runtime.jsx)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--min wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--min","aria-label":(0,build_module.__)("Filter products by minimum price","woo-gutenberg-products-block"),"aria-valuetext":ariaReadableMinPrice,value:Number.isFinite(minPrice)?minPrice:minConstraint,onChange:rangeInputOnChange,step:minRangeStep,min:minConstraint,max:maxConstraint,ref:minRange,disabled:isLoading&&!hasValidConstraints,tabIndex:showInputFields?-1:0}),(0,jsx_runtime.jsx)("input",{type:"range",className:"wc-block-price-filter__range-input wc-block-price-filter__range-input--max wc-block-components-price-slider__range-input wc-block-components-price-slider__range-input--max","aria-label":(0,build_module.__)("Filter products by maximum price","woo-gutenberg-products-block"),"aria-valuetext":ariaReadableMaxPrice,value:Number.isFinite(maxPrice)?maxPrice:maxConstraint,onChange:rangeInputOnChange,step:maxRangeStep,min:minConstraint,max:maxConstraint,ref:maxRange,disabled:isLoading,tabIndex:showInputFields?-1:0})]})}),getInputClassName=type=>`wc-block-price-filter__amount wc-block-price-filter__amount--${type} wc-block-form-text-input wc-block-components-price-slider__amount wc-block-components-price-slider__amount--${type}`,commonFormattedMonetaryAmountProps={currency,decimalScale:0},commonFormattedMonetaryAmountInputProps={...commonFormattedMonetaryAmountProps,displayType:"input",allowNegative:!1,disabled:isLoading||!hasValidConstraints,onBlur:priceInputOnBlur};return(0,jsx_runtime.jsxs)("div",{className:classes,ref:wrapper,children:[(!inlineInputAvailable||!showInputFields)&&slider,showInputFields&&(0,jsx_runtime.jsxs)("div",{className:"wc-block-price-filter__controls wc-block-components-price-slider__controls",children:[isUpdating?(0,jsx_runtime.jsx)("div",{className:"input-loading"}):(0,jsx_runtime.jsx)(components.sY,{...commonFormattedMonetaryAmountInputProps,className:getInputClassName("min"),"aria-label":(0,build_module.__)("Filter products by minimum price","woo-gutenberg-products-block"),isAllowed:isValidMinValue({minConstraint,minorUnit:currency.minorUnit,currentMaxValue:maxPriceInput}),onValueChange:value=>{value!==minPriceInput&&setMinPriceInput(value)},value:minPriceInput}),inlineInputAvailable&&slider,isUpdating?(0,jsx_runtime.jsx)("div",{className:"input-loading"}):(0,jsx_runtime.jsx)(components.sY,{...commonFormattedMonetaryAmountInputProps,className:getInputClassName("max"),"aria-label":(0,build_module.__)("Filter products by maximum price","woo-gutenberg-products-block"),isAllowed:isValidMaxValue({maxConstraint,minorUnit:currency.minorUnit}),onValueChange:value=>{value!==maxPriceInput&&setMaxPriceInput(value)},value:maxPriceInput})]}),!showInputFields&&!isUpdating&&Number.isFinite(minPrice)&&Number.isFinite(maxPrice)&&(0,jsx_runtime.jsxs)("div",{className:"wc-block-price-filter__range-text wc-block-components-price-slider__range-text",children:[(0,jsx_runtime.jsx)(components.sY,{...commonFormattedMonetaryAmountProps,value:minPrice}),(0,jsx_runtime.jsx)(components.sY,{...commonFormattedMonetaryAmountProps,value:maxPrice})]}),(0,jsx_runtime.jsxs)("div",{className:"wc-block-components-price-slider__actions",children:[(isEditor||!isUpdating&&(minPrice!==minConstraint||maxPrice!==maxConstraint))&&(0,jsx_runtime.jsx)(filter_reset_button,{onClick:()=>{onChange([minConstraint,maxConstraint]),debouncedUpdateQuery()},screenReaderLabel:(0,build_module.__)("Reset price filter","woo-gutenberg-products-block")}),showFilterButton&&(0,jsx_runtime.jsx)(filter_submit_button,{className:"wc-block-price-filter__button wc-block-components-price-slider__button",isLoading:isUpdating,disabled:isLoading||!hasValidConstraints,onClick:onSubmit,screenReaderLabel:(0,build_module.__)("Apply price filter","woo-gutenberg-products-block")})]})]})};PriceSlider.displayName="PriceSlider",PriceSlider.__docgenInfo={description:"",methods:[],displayName:"PriceSlider",props:{showInputFields:{defaultValue:{value:"true",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether to show input fields for the values or not."},showFilterButton:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether to show the filter button for the slider."},inlineInput:{defaultValue:{value:"true",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether to show input fields inline with the slider or not."},isLoading:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether values are loading or not."},isUpdating:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Whether values are updating or not. The update starts when the price slider is changed."},isEditor:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:"Wheter we're in the editor or not."},onSubmit:{defaultValue:{value:"() => void 0",computed:!1},required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Function to call when submit event fires."},currency:{required:!0,tsType:{name:"Currency"},description:"Currency configuration object."},maxConstraint:{required:!0,tsType:{name:"union",raw:"number | null | undefined",elements:[{name:"number"},{name:"null"},{name:"undefined"}]},description:"Maximum constraint."},maxPrice:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Maximum price for slider."},minConstraint:{required:!0,tsType:{name:"union",raw:"number | null | undefined",elements:[{name:"number"},{name:"null"},{name:"undefined"}]},description:"Minimum constraint."},minPrice:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:"Minimum price for slider."},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"( value: [ number, number ] ) => void",signature:{arguments:[{name:"value",type:{name:"tuple",raw:"[ number, number ]",elements:[{name:"number"},{name:"number"}]}}],return:{name:"void"}}},description:"Function to call on the change event."},step:{required:!1,tsType:{name:"number"},description:"What step values the slider uses."}}};const price_slider=PriceSlider;"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/price-slider/index.tsx"]={name:"PriceSlider",docgenInfo:PriceSlider.__docgenInfo,path:"assets/js/base/components/price-slider/index.tsx"});const index_stories={title:"Base Components/PriceSlider",component:price_slider,args:{currency:currency.QT.USD,maxPrice:5e3,maxConstraint:5e3,minConstraint:1e3,minPrice:1e3,step:250},argTypes:{currency:currency.I7,maxPrice:{control:{disable:!0}},minPrice:{control:{disable:!0}}}},Template=args=>{const{maxPrice,minPrice,...props}=args,[min,setMin]=(0,react.useState)(minPrice),[max,setMax]=(0,react.useState)(maxPrice);return(0,jsx_runtime.jsx)(price_slider,{...props,maxPrice:max,minPrice:min,onChange:([newMin,newMax])=>{setMin(newMin),setMax(newMax)}})};Template.displayName="Template";const Default=Template.bind({}),WithoutInputs=Template.bind({});WithoutInputs.args={showInputFields:!1};const WithButton=Template.bind({});WithButton.args={showFilterButton:!0},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  const {\n    maxPrice,\n    minPrice,\n    ...props\n  } = args;\n  // PriceSlider expects client to update min & max price, i.e. is a controlled component\n  const [min, setMin] = useState(minPrice);\n  const [max, setMax] = useState(maxPrice);\n  return <PriceSlider {...props} maxPrice={max} minPrice={min} onChange={([newMin, newMax]) => {\n    setMin(newMin);\n    setMax(newMax);\n  }} />;\n}",...Default.parameters?.docs?.source}}},WithoutInputs.parameters={...WithoutInputs.parameters,docs:{...WithoutInputs.parameters?.docs,source:{originalSource:"args => {\n  const {\n    maxPrice,\n    minPrice,\n    ...props\n  } = args;\n  // PriceSlider expects client to update min & max price, i.e. is a controlled component\n  const [min, setMin] = useState(minPrice);\n  const [max, setMax] = useState(maxPrice);\n  return <PriceSlider {...props} maxPrice={max} minPrice={min} onChange={([newMin, newMax]) => {\n    setMin(newMin);\n    setMax(newMax);\n  }} />;\n}",...WithoutInputs.parameters?.docs?.source}}},WithButton.parameters={...WithButton.parameters,docs:{...WithButton.parameters?.docs,source:{originalSource:"args => {\n  const {\n    maxPrice,\n    minPrice,\n    ...props\n  } = args;\n  // PriceSlider expects client to update min & max price, i.e. is a controlled component\n  const [min, setMin] = useState(minPrice);\n  const [max, setMax] = useState(maxPrice);\n  return <PriceSlider {...props} maxPrice={max} minPrice={min} onChange={([newMin, newMax]) => {\n    setMin(newMin);\n    setMax(newMax);\n  }} />;\n}",...WithButton.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithoutInputs","WithButton"]},"./storybook/custom-controls/currency.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{QT:()=>currencies,mD:()=>currenciesAPIShape,I7:()=>currencyControl});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),dist_es2015=__webpack_require__("./node_modules/dot-case/dist.es2015/index.js");var map_keys=__webpack_require__("./assets/js/base/utils/map-keys.ts");const snakeCaseKeys=obj=>(0,map_keys.C)(obj,((_,key)=>function snakeCase(input,options){return void 0===options&&(options={}),(0,dist_es2015.$)(input,(0,tslib_es6.pi)({delimiter:"_"},options))}(key))),currencies={EUR:{code:"EUR",symbol:"€",thousandSeparator:".",decimalSeparator:",",minorUnit:2,prefix:"",suffix:"€"},USD:{code:"USD",symbol:"$",thousandSeparator:",",decimalSeparator:".",minorUnit:2,prefix:"$",suffix:""}},currenciesAPIShape=Object.fromEntries(Object.entries(currencies).map((([key,value])=>[key,snakeCaseKeys(value)]))),currencyControl={control:"select",options:currencies,mapping:Object.keys(currencies)}},"./assets/js/base/components/filter-reset-button/style.scss":()=>{},"./assets/js/base/components/filter-submit-button/style.scss":()=>{},"./assets/js/base/components/price-slider/style.scss":()=>{},"./node_modules/use-debounce/dist/index.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{y1:()=>c});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function c(u,e,c){var i=this,a=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),o=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(0),f=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),l=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)([]),m=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(),d=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(u),p=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!0);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){d.current=u}),[u]);var g=!e&&0!==e&&"undefined"!=typeof window;if("function"!=typeof u)throw new TypeError("Expected a function");e=+e||0;var w=!!(c=c||{}).leading,s=!("trailing"in c)||!!c.trailing,x="maxWait"in c,y=x?Math.max(+c.maxWait||0,e):null;(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){return p.current=!0,function(){p.current=!1}}),[]);var h=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var r=function(r){var n=l.current,t=m.current;return l.current=m.current=null,o.current=r,v.current=d.current.apply(t,n)},n=function(r,n){g&&cancelAnimationFrame(f.current),f.current=g?requestAnimationFrame(r):setTimeout(r,n)},t=function(r){if(!p.current)return!1;var n=r-a.current;return!a.current||n>=e||n<0||x&&r-o.current>=y},u=function(n){return f.current=null,s&&l.current?r(n):(l.current=m.current=null,v.current)},c=function r(){var c=Date.now();if(t(c))return u(c);if(p.current){var i=e-(c-a.current),f=x?Math.min(i,y-(c-o.current)):i;n(r,f)}},h=function(){var u=Date.now(),d=t(u);if(l.current=[].slice.call(arguments),m.current=i,a.current=u,d){if(!f.current&&p.current)return o.current=a.current,n(c,e),w?r(a.current):v.current;if(x)return n(c,e),r(a.current)}return f.current||n(c,e),v.current};return h.cancel=function(){f.current&&(g?cancelAnimationFrame(f.current):clearTimeout(f.current)),o.current=0,l.current=a.current=m.current=f.current=null},h.isPending=function(){return!!f.current},h.flush=function(){return f.current?u(Date.now()):v.current},h}),[w,x,e,y,s,g]);return h}}}]);